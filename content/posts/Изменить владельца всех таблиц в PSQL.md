---
title: Изменить владельца всех таблиц в PSQL
date: 2023-09-12T17:22:00+03:00
draft: true
---
Недостаточно просто задать все права для импортируемой базы данных. Вам необходимо изменить владельца для всех таблиц в БД. И, к сожалению, не существует простого, встроенного в движок СУБД сделать это.

Я нашел следующее решение. Мы читаем все названия таблиц из `Information Schema`, и далее итерируясь по ним меняем владельца для каждой таблицы:

```sql
SELECT format(
          'ALTER TABLE public.%I OWNER TO <user_name>',
          table_name
       )
FROM information_schema.tables
WHERE table_schema = 'public'
  AND table_type = 'BASE TABLE' \gexec
```

Несколько замечаний:

1) Вам необходимо иметь соответствующие для изменения владельца таблиц права (например, зайти пользователем `postgres`);
2) Замените в примере `<user_name>` на ваш;
3) Параметр `\gexec` выполнит каждую строку результата выполнения запроса как отдельное выражение.